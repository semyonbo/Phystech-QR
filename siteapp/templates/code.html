{% extends "index.html" %}

{% block content %}
<div class="code-blank" style="background: repeat url({{ url_for('static', filename='img/font.svg') }}); background-size: 20%">
        <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=d785b28b-95e2-4091-b750-7b0403fb6abc" type="text/javascript"></script>
        <script src="{{url_for('static', filename='js/map.js')}}"></script>

        <div class="code-box load">
            <div class="column">
                <div class="column-item" style="visibility: {{ disp }}">
                    <div class="get_form">
                        <p class="p-text" style="text-align: center">Выберите тип QR-кода</p>
                        <form  action="#" method="POST" id="main_form">
                            <div class="form_radio_group">
                                <div class="form_radio_group-item">
                                    <input id="link" type="radio" autocomplete="off" name="inp_radio" value="1" checked>
                                    <label for="link">Ссылка</label>
	                            </div>
                                <div class="form_radio_group-item">
                                    <input id="wifi" type="radio" autocomplete="off" name="inp_radio" value="2">
                                    <label for="wifi">Wi-Fi</label>
                                </div>
                                <div class="form_radio_group-item">
                                    <input id="contact" type="radio" autocomplete="off" name="inp_radio" value="3">
                                    <label for="contact">Контакты</label>
                                </div>
	                            <div class="form_radio_group-item">
		                            <input id="text" type="radio" autocomplete="off" name="inp_radio" value="4">
		                            <label for="text">Текст</label>
	                            </div>
                                <div class="form_radio_group-item">
		                            <input id="geo" type="radio" autocomplete="off" name="inp_radio" value="5">
		                            <label for="geo">Геопозиция</label>
	                            </div>
                            </div>
                            <div id="link_form">
                                <label for="link_inp">Введите ссылку<br/></label>
                                <input class="form__input" type="url" size="3" placeholder="https://mylink.com" id="link_inp" name="link_inp">
                                    <div class="switch">
                                    <div class="switch__2">
                                        <input id="stats_option" name="stats_option" form="main_form" autocomplete="off" type="checkbox">
                                        <label for="stats_option"></label>
                                    </div>
                                    <p class="p-code">Сбор статистики</p>
                                </div>
                            </div>
                            <div id="wifi_form" style="display: none">
                                <label for="wifi_name_inp">Введите имя сети Wi-Fi (WPA/WPA2)<br/></label>
                                <input type="text" class="form__input" placeholder="my-home-wifi" id="wifi_name_inp" name="wifi_name_inp"><br>
                                <label for="wifi_pass_inp">Введите пароль к вашей сети WiFi<br/></label>
                                <input type="password" class="form__input" placeholder="reAllyHardPa22" id="wifi_pass_inp" name="wifi_pass_inp">
                            </div>
                            <div id="contact_form" style="display: none">
                                <label for="name_inp">Введите имя контакта<br/></label>
                                <input type="text" class="form__input" placeholder="Andrew" id="name_inp" name="name_inp"><br>
                                <label for="phone_inp">Введите номер телефона<br/></label>
                                <input type="tel" class="form__input" placeholder="+7 920 831 54 37" id="phone_inp" name="phone_inp"><br>
                                <label for="email_inp">Введите Email<br/></label>
                                <input type="email" class="form__input" placeholder="andrew@niuitmo.ru" id="email_inp" name="email_inp">
                            </div>
                            <div id="text_form" style="display: none">
                                <label for="text_inp">Введите текст<br/></label>
                                <input type="text" class="form__input" placeholder="I love physics" id="text_inp" name="text_inp"><br>
                            </div>
                            <div id="geo_form" style="display: none">
                                <input type="text" class="form__input" placeholder="59.927301, 30.338456" id="geo_inp" name="geo_inp"><br>
                                <div id="map" style="width: 500px; height: 300px; margin: auto"></div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="column-item">
                    <div class="get_form">
                        <div class="design_options">
                            <p class="p-text" style="text-align: center">Настройки фона кода</p>
                            <div class="switch">
                                <div class="switch__1">
                                    <input id="code_back_enable" name="code_back_enable" form="main_form" autocomplete="off" type="checkbox">
                                    <label for="code_back_enable"></label>
                                </div>
                                <p class="p-code">Использовать фон</p>
                            </div>
                            <div class="segmented-control">
                                <input type="radio" name="radio2" value="3" id="tab-1" checked/>
                                <label for="tab-1" class= "segmented-control__1">
                                    <p>Tab 1</p></label>
                                <input type="radio" name="radio2" value="4" id="tab-2" />
                                <label for="tab-2" class= "segmented-control__2">
                                    <p>Tab 2</p></label>
                                <input type="radio" name="radio2" value="5" id="tab-3" />
                                <label for="tab-3" class= "segmented-control__3">
                                    <p>Tab 3</p></label>
                                <div class="segmented-control__color"></div>
                            </div>
                            <p class="p-text" style="text-align: center">Настройки логотипа</p>
                            <div class="form_radio_group">
                                <div class="form_radio_group-item">
                                    <input type="radio"  id="enable_logo" form="main_form" autocomplete="off" name="logo" value="enable">
                                    <label for="enable_logo"> Использовать логотип</label>
                                </div>
                                <div class="form_radio_group-item">
                                    <input type="radio"  id="disable_logo"  form="main_form" autocomplete="off" name="logo" value="disable">
                                    <label for="disable_logo">Без логотипа</label>
                                </div>
                            </div>
                            <div id="logo_options" style="display: none">
                                <div class="form_radio_group">
                                    <div class="form_radio_group-item">
                                        <input type="radio" id="square_logo" form="main_form" autocomplete="off" name="logo_form" value="square">
                                        <label for="square_logo">Квадратный логотип</label>
                                    </div>
                                    <div class="form_radio_group-item">
                                        <input type="radio" id="round_logo" form="main_form" autocomplete="off" name="logo_form" value="round">
                                        <label for="round_logo">Круглый логотип</label>
                                    </div>
                                </div>
                                <div class="form_radio_group" id="square_colour" style="display: none">
                                    <div class="form_radio_group-item">
                                        <input type="radio" id="yellow_square" form="main_form" autocomplete="off" name="square_colour" value="yellow" checked>
                                        <label for="yellow_square">Желтая обводка</label>
                                    </div>
                                    <div class="form_radio_group-item">
                                        <input type="radio" id="black_square" form="main_form" autocomplete="off" name="square_colour" value="black">
                                        <label for="black_square">Черная обводка</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="img_container">
                        <img class="code" style="visibility: {{ hidden }}" src="data:image/png;base64,{{ img_data }}">
                    </div>
                    <a href="{{ shorten_url }}">{{ shorten_url }}</a>
                </div>
            </div>
            <button type="submit" form="main_form" class="button_main"><span>Отправить</span></button>
        </div>
        <script>
            $(document).ready ( function(){
                document.querySelector('input[name="inp_radio"]:checked').value=1;
                document.getElementById('link_inp').setAttribute('required', '');
            });

            $('input[type=radio][name=logo]').change(function (){
                if (this.value === 'disable') {
                    $('#logo_options')[0].style.display= 'none';
                }
                else if (this.value === 'enable'){
                    $('#logo_options')[0].style.display= ''
                }
            })

            $('input[type=radio][name=logo_form]').change(function (){
                if (this.value === 'round') {
                    $('#square_colour')[0].style.display= 'none';
                }
                else if (this.value === 'square'){
                    $('#square_colour')[0].style.display= ''
                }
            })

            $('input[type=radio][name=inp_radio]').change(function() {
                if (this.value) {
                    $('#link_form')[0].style.display= 'none';
                    $('#wifi_form')[0].style.display= 'none';
                    $('#contact_form')[0].style.display= 'none';
                    $('#text_form')[0].style.display= 'none';
                    $('#geo_form')[0].style.display= 'none';
                    $('#link_inp').removeAttr('required');
                    $('#wifi_name_inp').removeAttr('required');
                    $('#name_inp').removeAttr('required');
                    $('#text_inp').removeAttr('required');
                    $('#wifi_pass_inp').removeAttr('required');
                }
                if (this.value === '1') {
                    $('#link_form')[0].style.display= '';
                    $('#link_inp').attr('required', '');
                }
                else if (this.value === '2') {
                    $('#wifi_form')[0].style.display= '';
                    $('#wifi_name_inp').attr('required','');
                    $('#wifi_pass_inp').attr('required','');
                }
                else if (this.value === '3') {
                    $('#contact_form')[0].style.display= '';
                    $('#name_inp').attr('required', '');
                }
                else if (this.value === '4') {
                    $('#text_form')[0].style.display= '';
                    $('#text_inp').attr('required', '');
                }
                else if (this.value === '5') {
                    $('#geo_form')[0].style.display= '';
                    $('#geo_inp').attr('required', '');
                }
            });
        </script>
</div>
{% endblock %}
